\apendice{Plan de Proyecto Software}

\section{Introducción}

\section{Planificación temporal}

El desarrollo del proyecto se ha llevado a cabo utilizando metodologias ágiles, basandose en la metodología \textit{scrum} con algunas modificaciones (una sóla persona y sin reuniones diarias).

Se aplicó una estrategia de desarrollo incremental, con iteraciones que llamaremos \textit{sprints}.

El resultado de cada iteración es un entregable, sobre el que se discute en la reunión posterior a cada sprint.

Se realizó, en principio, una reunión a la semana con los tutores para exponer las modificaciones realizadas en el sprint anterior y planificar los cambios a realizar en la siguiente iteración. 

Estas tareas están priorizadas por el tiempo estimado de su realización, se puede ver esta estimación en el enlace de cada sprint a sus tareas. 

A continuación se va a realizar un breve resumen de las tareas realizadas en cada una de las iteraciones, así como la duración de cada sprint y el gráfico \textit{burndown} correspondiente.

\subsection{Sprint 0 (16/02/2018 - 02/03/2018)}

Primer sprint del proyecto. En la la reunión de planificación de este primer sprint se discute de forma general de lo que va a tratar el proyecto. 

Las tareas realizadas durante este sprint fueran la creación y configuración del repositorio y sobre todo investigar sobre las tecnologías y herramientas que se podían utilizar.

Se investigaron posibles fuentes de datos para implementar más adelante: INE, SEPE, AEAT.

La duración fue de dos semanas en lugar de una para poder documentarse sobre todos los aspectos relevantes del proyecto.

\imagen{sprints/sprint0}{Burndown del sprint 0}

\foothref{Tareas del sprint 0 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/1?closed=1}

\subsection{Sprint 1 (03/03/2018 - 08/03/2018)}

Un objetivo de este sprint es investigar alternativas de bases de datos no relacionades que se podrían utilizar. Se ha elegido MongoDB.

El otro objetivo es empezar a implementar prototipos con las fuentes de datos que se habían encontrado en el sprint anterior. Se implementaron prototipos del INE, de la agencia tributaria y del SEPE.

\imagen{sprints/sprint1}{Burndown del sprint 1}

\foothref{Tareas del sprint 1 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/2?closed=1}

\subsection{Sprint 2 (09/03/2018 - 15/03/2018)}

El primer objetivo de este sprint es crear la estructura de la página web con Flask. Utilizando un modelo vista-controlador. También se utiliza Bootstrap para ahorrar trabajo en el diseño.

Se implementó un prototipo de la carga de datos hacia la base de datos y otro para la descarga de datos desde la base de datos para ser mostrados.

Se hizo una implementación de las fuentes de datos a partir de los prototipos del sprint 1 de modo que se pueda cargar todas las fuentes de manera automática.

\imagen{sprints/sprint2}{Burndown del sprint 2}

\foothref{Tareas del sprint 2 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/3?closed=1}

\subsection{Sprint 3 (16/03/2018 - 22/03/2018)}

En este sprint se sopesaron varias plataformas para hacer el despliegue de la web. De ellas se eligió DigitalOcean y Nanobox.

Se realizó el despliegue utilizando estas plataformas. \href{http://tfg-datos-publicos.nanoapp.io/}{Web desplegada}.

Se investigaron los posibles riesgos de seguridad como inyecciones NoSQL.

Se implementó un formulario para la consulta de datos en la página web. En esta primera aproximación se podía hacer una consulta comparando con una columna de una de las fuentes de datos.

\imagen{sprints/sprint3}{Burndown del sprint 3}

\foothref{Tareas del sprint 3 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/4?closed=1}

\subsection{Sprint 4 (23/03/2018 - 13/04/2018)}

Este sprint coincide con semana santa, por lo que dura una semana más de lo habitual y la carga de trabajo también es mayor.

Se corrigieron errores en los tipos de las fuentes de datos al tratar con números como cadenas. 

Se implementó una forma de descargar las consultas a partir del formulario. 

Se mejoró interfaz gráfica y el formulario de consulta.

Se modificaron las fuentes de datos para corregir errores y añadir el código de municipio a todas ellas para más tarde poder unirlas.

\imagen{sprints/sprint4}{Burndown del sprint 4}

\foothref{Tareas del sprint 4 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/5?closed=1}

\subsection{Sprint 5 (14/04/2018 - 25/04/2018)}

Este sprint se dedicó a empezar a documentar la memoria y corregir algunos errores en la página de consulta como el reenvio de formularios en firefox y la descarga de consultas en JSON y CSV.

También se añadió una descripción a la fuente de datos para explicar de qué se trata cada una en la interfaz web.

\imagen{sprints/sprint5}{Burndown del sprint 5}

\foothref{Tareas del sprint 5 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/6?closed=1}

\subsection{Sprint 6 (26/04/2018 - 02/05/2018)}

El objetivo principal de este sprint fue implementar la posibilidad de juntar varias subconsultas mediante un \textit{join}. Otra característica implementada es la de avisar al usuario si se ha sobrepasado el límite de columnas especificado, para que pueda filtrar más fino.

También se consideró hacer cambios en el modelo de datos, pero debido a la alta dimensionalidad se ha dejado como estaba en el sprint anterior.

\imagen{sprints/sprint6}{Burndown del sprint 6}

\foothref{Tareas del sprint 6 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/7?closed=1}

\subsection{Sprint 7 (03/05/2018 - 09/05/2018)}

En este sprint se implementó un mapa coroplético para mostrar los valores de cualquier atributo en el mapa agrupando los municipios por su provincia.

Se eliminar los campos duplicados de las consultas que surgían al realizar \textit{join} de varias subconsultas. Como estos campos repetidos siempre son iguales, se ha optado por eliminarlos en lugar de renombrarlos.

\imagen{sprints/sprint7}{Burndown del sprint 7}

\foothref{Tareas del sprint 7 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/8?closed=1}

\subsection{Sprint 8 (10/05/2018 - 16/05/2018)}

En este sprint se implementó una aplicación para juntar varios ficheros CSV en uno sólo utilizando \textit{join}. Para poder aplicar técnicas de minería de datos sobre estos ficheros.

Se añadió una funcionalidad de poder mostrar mapas coropléticos a nivel de municipio, además de a nivel de provincia.

\imagen{sprints/sprint8}{Burndown del sprint 8}

\foothref{Tareas del sprint 8 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/9?closed=1}

\subsection{Sprint 9 (17/05/2018 - 23/05/2018)}

En este sprint se añadió un campo para introducir columnas calculadas a partir de los campos de una consulta. 

Se añadió otr fuente de datos, resultados electorales del congreso, utilizando los datos del ministerio del interior.

Se añadió un campo para seleccionar la columna por la que se quieren juntar varios CSV a partir de las columnas comunes.

\imagen{sprints/sprint9}{Burndown del sprint 9}

\foothref{Tareas del sprint 9 en Github}{https://github.com/IvanArjona/TFG-Datos-publicos/milestone/10?closed=1}

\section{Estudio de viabilidad}

\subsection{Viabilidad económica}

\subsubsection{Costes de personal}

El proyecto se ha llevado a cabo por un desarrollador empleado a tiempo parcial durante 4 meses. Se considera un salario neto de \EUR{1000}. (Ver tabla \ref{tab:personal})

\begin{table}[]
	\centering
	\begin{tabular}{@{}ll@{}}
		\toprule
		Concepto & Coste (\euro) \\
		\midrule
		Salario neto & \EUR{1000}  \\
		Retención IRPF (19 \%) & \EUR{360,53} \\
		Seguridad social (28,30 \%) & \EUR{537,00} \\
		\midrule
		Salario bruto (mensual) & \EUR{1897,53} \\
		\midrule
		Total 4 meses & \EUR{7592,59} \\
		\bottomrule
	\end{tabular}
	\caption{Costes de personal}
	\label{tab:personal}
\end{table}

Los percentajes de cotización a la seguridad social se han calculado a partir del régimen general para 2018 como horas comunes (23,6\% empresa y 4,7\% trabajadores) \cite{misc:cotizacion}.

Además se sumará el sueldo de los dos tutores asignados al proyecto durante 4 meses, que corresponde a 0,5 créditos. \cite{misc:retribuciontutores}.

\begin{itemize}
	\item Ayudante de doctor. Sueldo mensual: \EUR{1.815,61}. Imparte 24 créditos anuales.
	$$ \dfrac{\textup{\EUR{1.815,61}} * 12 \;meses}{24 \;créditos * 0.5 \;créditos} = \textup{\EUR{453,90}} $$
	\item Doctor permanente. Sueldo mensual: \EUR{2.325,24}. Imparte 24 créditos anuales.
	$$ \dfrac{\textup{\EUR{2.325,24}} * 12 \;meses}{24 \;créditos * 0.5 \;créditos} = \textup{\EUR{581,31}} $$
\end{itemize}

Corresponde un total de \EUR{7592,59} de personal y \EUR{1035,21} de los tutores.

\subsubsection{Costes de material}

En esta sección se incluyen los costes de software y hardware.

Como hardware se incluye el coste del servidor web (\EUR{5} mensual) y el equipo que se ha utilizado para desarrollar la aplicación (un único pago de \EUR{1000}) con amortización a 5 años. (Ver tabla \ref{tab:costeshardware})

$$ \dfrac{\textup{\EUR{1.000}} * 4 \;meses}{5 \;años * 12 \;meses} = \textup{\EUR{66,67}} $$

\begin{table}[H]
	\centering
	\begin{tabular}{@{}lll@{}}
		\toprule
		Concepto & Coste (\euro) & Amortización\\
		\midrule
		Ordenador portátil & \EUR{1000} & \EUR{66,67}  \\
		Servidor web (mensual) & \EUR{5} \\
		\midrule
		Total 4 meses & & \EUR{86,67} \\
		\bottomrule
	\end{tabular}
	\caption{Costes de hardware}
	\label{tab:costeshardware}
\end{table}

Como software incluimos la licencia de Windows como único pago y las licencias de Github developer, Codacy Pro y PyCharm como pago mensual. Gitkraken Pro supone un coste de \EUR{41} anual, como no hay pago mensual, se considerará el pago completo. (Ver tabla \ref{tab:costessoftware})

\begin{table}[H]
	\centering
	\begin{tabular}{@{}ll@{}}
		\toprule
		Concepto & Coste (\euro) \\
		\midrule
		Windows 10 Home  & \EUR{145} \\
		GitHub Developer (mensual) & \EUR{7} \\
		Codacy Pro Plan (mensual) & \EUR{15} \\
		PyCharm (mensual) & \EUR{8,90} \\
		GitKraken Pro (anual) & \EUR{41} \\
		\midrule
		Total 4 meses & \EUR{309,60} \\
		\bottomrule
	\end{tabular}
	\caption{Costes de software}
	\label{tab:costessowftware}
\end{table}

\subsubsection{Costes totales}

Sumando los costes de los apartados anteriores tendremos un coste total de \EUR{9957.4}. (Ver tabla \ref{tab:costestotal})

\begin{table}[H]
	\centering
	\begin{tabular}{@{}ll@{}}
		\toprule
		Concepto & Coste (\euro) \\
		\midrule
		Personal  & \EUR{7592,59} \\
		Tutores & \EUR{1035,21} \\
		Hardware & \EUR{1020} \\
		Software & \EUR{309,60} \\
		\midrule
		Total & \EUR{9024,07} \\
		\bottomrule
	\end{tabular}
	\caption{Coste total}
	\label{tab:costestotal}
\end{table}

\subsubsection{Beneficios}

Si se quisiera rentabilizar el proyecto se pueden considerar varias alternativas.

\begin{itemize}
	\item Inclusión de publicidad.
	\item Modelo \textit{freemium} \cite{wiki:freemium}: incluir algunas características más avanzadas de pago.
	\item Limitar la cantidad de datos a mostrar poniendo una barrera económica.
\end{itemize}

\subsection{Viabilidad legal}

Con la ayuda de VersionEye \cite{misc:versioneye} se han listado las dependencias del proyecto, con sus correspondientes licencias (Ver tabla \ref{tab:dependencias}). 

\begin{table}[]
	\centering
	\begin{tabular}{lll}
		\hline
		Dependencia & Versión & Licencia \\ \hline
		beautifulsoup4 & 4.6.0 & MIT \\
		branca & 0.2.0& MIT \\
		chardet & 3.0.4 & MIT \\
		click & 6.7 & BSD \\
		dominate & 2.3.1 & LGPL-3.0 \\
		Flask & 0.12.4 & BSD \\
		Flask-Bootstrap & 3.3.7.1 & BSD \\
		Flask-PyMongo & 0.5.1 & BSD \\
		Flask-WTF & 0.14.2 & BSD \\
		folium & 0.5 & MIT \\
		itsdangerous & 0.24 & BSD \\
		Jinja2 & 2.10 & BSD \\
		MarkupSafe & 1.0 & BSD \\
		numpy & 1.14.3 & BSD \\
		pandas & 0.22.0 & BSD \\
		pymongo & 3.6.1 & Apache-2.0 \\
		requests & 2.18.4 & Apache-2.0 \\
		six & 1.11.0 & MIT \\
		urllib3 & 1.22 & MIT \\
		WTForms & 2.1 & BSD \\
		xldr & 1.1.0 & BSD \\
		Bootstrap & 3.3.7 & MIT \\
		jQuery & 1.12.4 & MIT \\
		Dynatable & 0.3.1 & AGPL \\
		\bottomrule
	\end{tabular}
	\caption{Dependencias}
	\label{tab:dependencias}
\end{table}

De las dependencias usadas en el proyecto, la licencia más restrictiva es LGPL-3.0 \cite{misc:lgpl}. Esta licencia permite el uso de la librería con total libertad, por lo que no nos restringe en la licencia que tenemos que utilizar.

Se ha decidido utilizar la licencia GNU-3.0 \cite{misc:gnu3}. Con esta licencia se permite el uso, distribución y modificación del proyecto, siempre que se mantenga la misma licencia y se acredite al autor original.
